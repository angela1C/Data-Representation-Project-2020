<!DOCTYPE html>
<html>
    <head>
        <title>All</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
       <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script> -->
       <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
       
       <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


    </head>

    <body>
        <div class="container">
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container-fluid">
              <a class="navbar-brand" href="#">OpenData</a>
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                  <li class="nav-item">
                    <a class="nav-link active" aria-current="page"  href="index.html">Home</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="searchTags.html">Search Tags</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="searchOrgs.html">Search Orgs</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="searchDatasets.html">Search Datasets </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="searchResources.html">Search Resources</a>
                  </li>

                  <li class="nav-item">
                    <a class="nav-link" href="getAllDatasets.html">AllDatasets</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="getAllTags.html">Tags</a>
                  </li>
                  
                  

                
                
                  
                </ul>
              </div>
            </div>
          </nav>
        </div>



<div class="container">    
        <div class="jumbotron text-center">
            <h1>Irish Open Datasets</h1>
            <p> List of datasets available through the open data portal</p> 
</div>

    <div class="container"class="collapse" class="table-responsive">

        <div class="row">
          <div class="col-sm-4" class="table-responsive">
            <h4>Tags</h4>
            <button onclick="getAllTagsAjax()"class="btn btn-info">getAllTags</button>
            <div class="table-responsive .table-striped">
                <table id="tagTable" class=" table table-sm">
                    <thead class="thead-dark">
                    <tr>
                        <th>Tag_id</th><th>Tag</th>
                    </tr>
                    </thead>
                </table>
            </div>
          </div>


          <div class="col-sm-4" class="table-responsive">
            <h3>Organisations</h3>
            <button onclick="getAllOrgAjax()"class="btn btn-info">getAllOrganizations</button>
        
        <table id="orgTable" class="table table-sm">
            <tr>
                <th>Org_id</th><th>Organization</th>
            </tr>
        </table>

          </div>

          <div class="col-sm-4" class="table-responsive">
            <h4>Datasets</h4>        
            <button onclick="getAllDatasetsAjax()"class="btn btn-info">getAllDatasets</button>

            <table id="datasetTable" class="table table-sm">
                <tr>
                    <th>Id</th><th>Dataset</th>
                </tr>
            </table>
          </div>
       
      </div>

    </div>

    <div class="jumbotron">

        <h4>Datasets with Urls etc</h4>
            <button onclick="getUrlsAjax()" class="btn btn-info">getUrls</button>
            <div class="table-responsive .table-striped">
                <table id="urlsTable" class="table table-sm">
                    <thead class="thead-dark">
                    <tr>
                        <th>url</th><th>format</th
                    </tr>
                    </thead>
                </table>
            </div>


    </div>
        
    
    <div class="container" class="table-responsive">

        <h4>Datasets details</h4>
            <button onclick="getAllDatasetsDetailsAjax()"class="btn btn-info">getAllDatasetDetails</button>
            <div class="table-responsive .table-striped">
                <table id="datasetDetailsTable" class="table table-sm">
                    <thead class="thead-dark">
                    <tr>
                        <th>id</th><th>package_id</th><th>name</th><th>description</th><th>url</th><th>format</th><th>created</th>
                    </tr>
                    </thead>
                </table>
            </div>


    </div>

</div>       
<script>

function getUrlsAjax(){
            host = window.location.origin
            $.ajax({
                "url": host+"/datasetDetails",
                "method":"GET",
                "data":"",
                "dataType": "JSON",
                "success":function(result){
                    console.log(result);
                    for (dataset of result){
                        addUrlToTable(dataset)
                    }
                    
                    
                },
                "error":function(xhr,status,error){
                    console.log("error: "+status+" msg:"+error);
                }
            });

        }

        function addUrlToTable(dataset){
            var tableElement = document.getElementById('urlsTable')
            var rowElement = tableElement.insertRow(-1)
            rowElement.setAttribute('id',dataset.id)
           

            var cell1 = rowElement.insertCell(0);
            cell1.innerHTML = dataset.url

            var cell2 = rowElement.insertCell(1);
            cell2.innerHTML = dataset.format
           
        }

function getAllDatasetsDetailsAjax(){
            host = window.location.origin
            $.ajax({
                "url": host+"/datasetDetails",
                "method":"GET",
                "data":"",
                "dataType": "JSON",
                "success":function(result){
                    console.log(result);
                    for (dataset of result){
                        addDataToTable(dataset)
                    }
                    
                    
                },
                "error":function(xhr,status,error){
                    console.log("error: "+status+" msg:"+error);
                }
            });

        }

        function addDataToTable(dataset){
            var tableElement = document.getElementById('datasetDetailsTable')
            var rowElement = tableElement.insertRow(-1)
            rowElement.setAttribute('id',dataset.id)
            var cell1 = rowElement.insertCell(0);
            cell1.innerHTML = dataset.id
           
            var cell2 = rowElement.insertCell(1);
            cell2.innerHTML = dataset.package_id

            var cell3 = rowElement.insertCell(2);
            cell3.innerHTML = dataset.name

            var cell4 = rowElement.insertCell(3);
            cell4.innerHTML = dataset.description

            var cell5 = rowElement.insertCell(4);
            cell5.innerHTML = dataset.url

            var cell6 = rowElement.insertCell(5);
            cell6.innerHTML = dataset.format


            var cell7 = rowElement.insertCell(6);
            cell7.innerHTML = dataset.created
           
        }


function getAllOrgAjax(){
            host = window.location.origin
            $.ajax({
                "url": host+"/orgs",
                "method":"GET",
                "data":"",
                "dataType": "JSON",
                "success":function(result){
                    console.log(result);
                    for (org of result){
                        addOrgToTable(org)
                    }
                    
                    
                },
                "error":function(xhr,status,error){
                    console.log("error: "+status+" msg:"+error);
                }
            });

        }

        function addOrgToTable(org){
            var tableElement = document.getElementById('orgTable')
            var rowElement = tableElement.insertRow(-1)
            rowElement.setAttribute('id',org.org_id)
            var cell1 = rowElement.insertCell(0);
            cell1.innerHTML = org.org_id
            var cell2 = rowElement.insertCell(1);
            cell2.innerHTML = org.organization
        }

        function getAllTagsAjax(){
            host = window.location.origin
            $.ajax({
                "url": host+"/tags",
                "method":"GET",
                "data":"",
                "dataType": "JSON",
                "success":function(result){
                    console.log(result);
                    for (tag of result){
                        addTagToTable(tag)
                    }
                    
                    
                },
                "error":function(xhr,status,error){
                    console.log("error: "+status+" msg:"+error);
                }
            });

        }

        function addTagToTable(tag){
            var tableElement = document.getElementById('tagTable')
            var rowElement = tableElement.insertRow(-1)
            rowElement.setAttribute('id',tag.tag_id)
            var cell1 = rowElement.insertCell(0);
            cell1.innerHTML = tag.id
            var cell2 = rowElement.insertCell(1);
            cell2.innerHTML = tag.tag_name
        }
        
        function getAllDatasetsAjax(){
            host = window.location.origin
            $.ajax({
                "url": host+"/datasets",
                "method":"GET",
                "data":"",
                "dataType": "JSON",
                "success":function(result){
                    console.log(result);
                    for (dataset of result){
                        addDatasetToTable(dataset)
                    }
                    
                    
                },
                "error":function(xhr,status,error){
                    console.log("error: "+status+" msg:"+error);
                }
            });

        }

        function addDatasetToTable(dataset){
            var tableElement = document.getElementById('datasetTable')
            var rowElement = tableElement.insertRow(-1)
            rowElement.setAttribute('id',dataset.id)
            var cell1 = rowElement.insertCell(0);
            cell1.innerHTML = dataset.id
            var cell2 = rowElement.insertCell(1);
            cell2.innerHTML = dataset.package_name
        }
        

        </script>   

    </body>
</html>